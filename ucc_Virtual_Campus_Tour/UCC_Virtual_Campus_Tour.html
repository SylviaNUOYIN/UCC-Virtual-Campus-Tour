<!DOCTYPE html>
<html lang="en">

  <head>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="">
    <meta name="author" content="">

    <title>MSCIM PROJECT</title>

    <!-- Bootstrap Core CSS -->
    <link href="vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">

    <!-- Custom Fonts -->
    <link href="vendor/font-awesome/css/font-awesome.min.css" rel="stylesheet" type="text/css">
    <link href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,700,300italic,400italic,700italic" rel="stylesheet" type="text/css">

    <!-- Custom CSS -->
    <link href="css/stylish-portfolio.css" rel="stylesheet">

    <!-- Three.js Style -->
    <style>
      
      .popup{
            max-width: 75%;
            height: auto;
            background-color: rgba(255, 255, 255, 0.49);
            border-radius: 5px;
            position: absolute;
            bottom: 5%;
            left: 10%;
            padding: 5px 20px 5px 20px;
            -moz-box-shadow: 3px 3px 5px 6px #ccc;
            -webkit-box-shadow: 3px 3px 5px 6px #ccc;
            box-shadow: 1px 3px 1px 1px rgba(0, 0, 0, 0.17);
            z-index:1109;
        }
      
      #info {
        color: #fff;
        position: absolute;
        top: 10px;
        width: 100%;
        text-align: center;
        z-index: 100;
        display:block;
      }
      #inset {
            width: 372px;
            height: 262.95px;
            background-color: #fff; /* or transparent; */
            border: 1px solid black; /* or none; */
            margin: 20px;
            padding: 0px;
            position: absolute;
            right: 0px;
            bottom: 0px;
            z-index: 100;
        }

      #info strong { color: #FFD700; font-weight: bold; text-decoration: cursor: pointer }
    
    </style>

  </head>

  <body>

    <!-- Header -->
    <header class="header" id="top">
      <div id="info">
      <div id="container">
        Please choose the starting position first. Press <strong>b</strong> to start from the left of the campus, Press <strong>c</strong> to start from the right of the campus</br>  
         Press <strong>w a s d</strong> (move), Press <strong>r</strong> move up Press <strong>f</strong> move down, The rotating red cube in the minimap is your location</br>
         Use the <strong>middle mouse button</strong> to click on the building to display the details</br>
      </div>
      <div id="position">

      </div>
      </div>
      <div class="popup"><div class="text"></div></div>
      
      <div id="inset"></div>
    </header>

    

    <!-- Callout -->
    <aside class="callout">
      <div class="text-vertical-center">
        <h1>Welcome to University College Cork</h1>
      </div>
    </aside>

    <!-- Portfolio -->
    <section id="portfolio" class="portfolio">
      <div class="container">
        <div class="row">
          <div class="col-lg-10 mx-auto text-center">
            <h2>Maps</h2>
            <hr class="small">
            <div class="row">
              <div class="col-md-6">
                <div class="portfolio-item">
                  <a href="#">
                    <img class="img-portfolio img-fluid" src="img/1.jpg">
                  </a>
                </div>
              </div>
              <div class="col-md-6">
                <div class="portfolio-item">
                  <a href="#">
                    <img class="img-portfolio img-fluid" src="img/2.jpg">
                  </a>
                </div>
              </div>
              <div class="col-md-6">
                <div class="portfolio-item">
                  <a href="#">
                    <img class="img-portfolio img-fluid" src="img/3.jpg">
                  </a>
                </div>
              </div>
              <div class="col-md-6">
                <div class="portfolio-item">
                  <a href="#">
                    <img class="img-portfolio img-fluid" src="img/4.jpg">
                  </a>
                </div>
              </div>
            </div>
            <!-- /.row (nested) -->
            <a href="https://www.ucc.ie/en/about/visitors/maps/" class="btn btn-dark">View More Items</a>
          </div>
          <!-- /.col-lg-10 -->
        </div>
        <!-- /.row -->
      </div>
      <!-- /.container -->
    </section>

    <!-- Call to Action -->
    <aside class="call-to-action bg-primary text-white">
      <div id="carouselExampleIndicators" class="carousel slide my-4" data-ride="carousel">
            <ol class="carousel-indicators">
              <li data-target="#carouselExampleIndicators" data-slide-to="0" class="active"></li>
              <li data-target="#carouselExampleIndicators" data-slide-to="1"></li>
              <li data-target="#carouselExampleIndicators" data-slide-to="2"></li>
              <li data-target="#carouselExampleIndicators" data-slide-to="3"></li>
            </ol>
            <div class="carousel-inner" role="listbox">
              <div class="carousel-item active">
                <img class="d-block img-fluid" src="img/5.jpg" alt="First slide" style='width:100%; height:700px'>
              </div>
              <div class="carousel-item">
                <img class="d-block img-fluid" src="img/6.jpg" alt="Second slide" style='width:100%; height:700px'>
              </div>
              <div class="carousel-item">
                <img class="d-block img-fluid" src="img/7.jpg" alt="Third slide" style='width:100%; height:700px'>
              </div>
              <div class="carousel-item">
                <img class="d-block img-fluid" src="img/8.jpg" alt="Fourth slide" style='width:100%; height:700px'>
              </div>
            </div>
            <a class="carousel-control-prev" href="#carouselExampleIndicators" role="button" data-slide="prev">
              <span class="carousel-control-prev-icon" aria-hidden="true"></span>
              <span class="sr-only">Previous</span>
            </a>
            <a class="carousel-control-next" href="#carouselExampleIndicators" role="button" data-slide="next">
              <span class="carousel-control-next-icon" aria-hidden="true"></span>
              <span class="sr-only">Next</span>
            </a>
          </div>
    </aside>

    <!-- Map -->
    <section id="contact" class="map">
      <iframe
  width="100%"
  height="100%"
  frameborder="0" style="border:0"
  src="https://www.google.com/maps/embed/v1/place?key=AIzaSyAOfa1uhuSv9aPhsJksbIXByc8jH_3XuY8
    &q=University+College+Cork,Cork+IE" allowfullscreen>
</iframe>
    </section>



    <!-- Footer -->
    <footer>
      <div class="container">
        <div class="row">
          <div class="col-lg-10 mx-auto text-center">
            <h4>
              <strong>JINGYA SHEN</strong>
            </h4>
            <p>MSCIM PROJECT
              <br>UNIVERSITY COLLEGE CORK</p>
            <ul class="list-unstyled">
                <i class="fa fa-envelope-o fa-fw"></i>
                <a>xxyybanl0716@gmail.com</a>
              </li>
            </ul>
            <br>
        
            <hr class="small">
            <p class="text-muted">Copyright &copy; UCC VIRTUAL TOUR 2017</p>
          </div>
        </div>
      </div>
      <a id="to-top" href="#top" class="btn btn-dark btn-lg js-scroll-trigger">
        <i class="fa fa-chevron-up fa-fw fa-1x"></i>
      </a>
    </footer>

    <!-- Bootstrap core JavaScript -->
    <script src="vendor/jquery/jquery.min.js"></script>
    <script src="vendor/popper/popper.min.js"></script>
    <script src="vendor/bootstrap/js/bootstrap.min.js"></script>

    <!-- Plugin JavaScript -->
    <script src="vendor/jquery-easing/jquery.easing.min.js"></script>

    <!-- Custom scripts for this template -->
    <script src="js/stylish-portfolio.js"></script>

    <!-- Three.js Part -->
    <script src="js/jquery.min.js"></script>
    <script src="js/helvetiker_regular.typeface.js"></script>
    <script src="js/three.js"></script>

    <script src="js/DDSLoader.js"></script>
    <script src="js/MTLLoader.js"></script>
    <script src="js/OBJLoader.js"></script>
    <script src="js/OrbitControls.js"></script>
    <script src="js/three.min.js"></script>

    <script src="js/Detector.js"></script>
    <script src="js/stats.min.js"></script>
    <script src="js/dat.gui.min.js"></script>
    <script src="js/ImprovedNoise.js"></script>

    <script src="js/FirstPersonControls.js"></script>



    <script type="x-shader/x-vertex" id="vertexShader">

      varying vec3 vWorldPosition;

      void main() {

        vec4 worldPosition = modelMatrix * vec4( position, 1.0 );
        vWorldPosition = worldPosition.xyz;

        gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

      }

    </script>

    <script type="x-shader/x-fragment" id="fragmentShader">

      uniform vec3 topColor;
      uniform vec3 bottomColor;
      uniform float offset;
      uniform float exponent;

      varying vec3 vWorldPosition;

      void main() {

        float h = normalize( vWorldPosition + offset ).y;
        gl_FragColor = vec4( mix( bottomColor, topColor, max( pow( max( h , 0.0), exponent ), 0.0 ) ), 1.0 );

      }

    </script>


    <script>

      if ( ! Detector.webgl ) {

        Detector.addGetWebGLMessage();
        document.getElementById( 'container' ).innerHTML = "";

      }

      var container, container2, controls, controls1, stats;
      var camera1, camera2, camera3, camera4, scene, scene2 ,renderer, renderer2;
      var dirLight, hemiLight;
      var mouseX = 0, mouseY = 0;
      var SCREEN_WIDTH = window.innerWidth;
      var SCREEN_HEIGHT = window.innerHeight;
      var windowHalfX = window.innerWidth / 2;
      var windowHalfY = window.innerHeight / 2;
      var mixers = [];     
      var mesh;
      var clock = new THREE.Clock();
      var stats, stats2;
      var obje;
      var mesh1, mx, my, mz;    
      var matrix = new THREE.Matrix4();
      var up = new THREE.Vector3( 0, 0, 1 );
      var up1 = new THREE.Vector3( 0, 0, 1 );
      var up2 = new THREE.Vector3( 0, 0, 1 );
      var axis = new THREE.Vector3( );
      var axis1 = new THREE.Vector3( );
      var axis2 = new THREE.Vector3( );
      var pt, pt1, pt2, radians, radians1, radians2, axis, axis1, axis2, tangent, tangent1, tangent2, path;   
      var wd = window;
      var cubes = [], plane, spline;
      var mouse, raycaster;
      var objects = [];
      var moveForward = false;
      var moveBackward = false;
      var moveLeft = false;
      var moveRight = false;
      var controlsEnabled = false;
      var prevTime = performance.now();
      var velocity = new THREE.Vector3();
      var cameraHelper;

      function init() {

        $(".popup").hide();
        container = document.getElementById( 'top' );
        //document.body.appendChild( container );
        container2 = document.getElementById( 'inset' );
        //document.body.appendChild( container2 );

        //camera1 = new THREE.OrthographicCamera( window.innerWidth / - 2, window.innerWidth / 2, window.innerHeight / 2, window.innerHeight / - 2, 1, 1000 );
        camera1 = new THREE.PerspectiveCamera( 2, 248/175.3, 1, 10000 );
        camera1.position.set(0,600,0);
        camera1.up = new THREE.Vector3(0,0,-1);
        camera1.lookAt(new THREE.Vector3(198.5,0,-1));
       
        camera2 = new THREE.PerspectiveCamera( 45, window.innerWidth / window.innerHeight, 1, 10000 );
        camera2.position.x = 183;
        camera2.position.y = 2;
        //camera2.lookAt(new THREE.Vector3(0,-1000,0));
        //cameraHelper = new THREE.CameraHelper(camera2);
        
        camera3 = new THREE.PerspectiveCamera( 45, window.innerWidth / window.innerHeight, 1, 10000 );

        activeCamera = camera2;

        // scene

        scene = new THREE.Scene();
        scene2 = new THREE.Scene();
        //scene2.add(camera3);
        //scene2.add(cameraHelper);
        scene.fog = new THREE.Fog( 0xffffff, 1, 5000 );
        scene.fog.color.setHSL( 0.6, 0, 1 );
        scene2.fog = new THREE.Fog( 0xffffff, 1, 5000 );
        scene2.fog.color.setHSL( 0.6, 0, 1 );

        // LIGHTS

        hemiLight = new THREE.HemisphereLight( 0xffffff, 0xffffff, 0.6 );
        hemiLight.color.setHSL( 0.6, 1, 0.6 );
        hemiLight.groundColor.setHSL( 0.095, 1, 0.75 );
        hemiLight.position.set( 0, 100, 0 );
        scene.add( hemiLight );
        //scene2.add( hemiLight );

        // dir light

        dirLight = new THREE.DirectionalLight( 0xffffff, 1 );
        dirLight.color.setHSL( 0.1, 1, 0.95 );
        dirLight.position.set( 0, 3, 1.3 );
        dirLight.position.multiplyScalar( 50 );
        scene.add( dirLight );
        //scene2.add( dirLight );
        dirLight.castShadow = true;
        dirLight.shadow.mapSize.width = 2048;
        dirLight.shadow.mapSize.height = 2048;
        

        //stats
        var stats = new Stats();
        stats.setMode(0); // 1: fps, 0: ms
        stats.domElement.style.position = 'absolute';
        stats.domElement.style.left = '0px';
        stats.domElement.style.top = '0px';
        document.body.appendChild( stats.domElement );
        setInterval( function () {
           stats.begin();
           stats.end();
        }, 1000 / 60 );


        // SKYDOME

        var vertexShader = document.getElementById( 'vertexShader' ).textContent;
        var fragmentShader = document.getElementById( 'fragmentShader' ).textContent;
        var uniforms = {
          topColor:    { value: new THREE.Color( 0x0077ff ) },
          bottomColor: { value: new THREE.Color( 0xC2D8EA ) },
          offset:      { value: 33 },
          exponent:    { value: 0.6 }
        };
        uniforms.topColor.value.copy( hemiLight.color );

        scene.fog.color.copy( uniforms.bottomColor.value );
      
        var skyGeo = new THREE.SphereGeometry( 4000, 32, 15 );
        var skyMat = new THREE.ShaderMaterial( { vertexShader: vertexShader, fragmentShader: fragmentShader, uniforms: uniforms, side: THREE.BackSide } );

        var sky = new THREE.Mesh( skyGeo, skyMat );
        scene.add( sky );
        
        // render

        renderer = new THREE.WebGLRenderer();
        renderer.setClearColor( scene.fog.color );
        //renderer.setPixelRatio( window.devicePixelRatio );
        renderer.setSize( window.innerWidth, window.innerHeight );
        container.appendChild( renderer.domElement );
        renderer.shadowMapEnabled= false;
            renderer.shadowMapSoft = false;
        renderer.gammaInput = true;
        renderer.gammaOutput = true;
        renderer.shadowMap.enabled = true;
        renderer.shadowMap.renderReverseSided = false;
        renderer2 = new THREE.WebGLRenderer();
        renderer2.setClearColor( scene.fog.color );
        renderer2.setSize( 372, 262.95 );
        container2.appendChild( renderer2.domElement );
        controls = new THREE.FirstPersonControls( activeCamera );
        controls.movementSpeed = 3;
        controls.lookSpeed = 0.1;

          var loader = new THREE.JSONLoader();
        loader.load( "material/flamingo.js", function( geometry ) {
          var material = new THREE.MeshPhongMaterial( {
            color: 0xffffff,
            morphTargets: true,
            vertexColors: THREE.FaceColors,
            shading: THREE.FlatShading
          } );
          var mesh = new THREE.Mesh( geometry, material );
          mesh.scale.set( 0.005, 0.005, 0.005 );
          mesh.rotation.y = Math.PI / 2;
          marker = mesh
          marker1 = mesh
          scene.add( marker );
          scene.add( marker1 );
          var mixer = new THREE.AnimationMixer( mesh );
          mixer.clipAction( geometry.animations[ 0 ] ).setDuration( 1 ).play();
          mixers.push( mixer );
        } );
        var loader = new THREE.JSONLoader();
        loader.load( "material/stork.js", function( geometry ) {
          var material = new THREE.MeshPhongMaterial( {
            color: 0xffffff,
            morphTargets: true,
            vertexColors: THREE.FaceColors,
            shading: THREE.FlatShading
          } );
          var mesh = new THREE.Mesh( geometry, material );
          mesh.scale.set( 0.005, 0.005, 0.005 );
          mesh.rotation.y = Math.PI / 2;
          marker1 = mesh
          scene.add( marker1 );
          var mixer = new THREE.AnimationMixer( mesh );
          mixer.clipAction( geometry.animations[ 0 ] ).setDuration( 1 ).play();
          mixers.push( mixer );

        } );

        var loader = new THREE.JSONLoader();
        loader.load( "material/parrot.js", function( geometry ) {
          var material = new THREE.MeshPhongMaterial( {
            color: 0xffffff,
            morphTargets: true,
            vertexColors: THREE.FaceColors,
            shading: THREE.FlatShading
          } );
          var mesh = new THREE.Mesh( geometry, material );
          mesh.scale.set( 0.005, 0.005, 0.005 );
          mesh.rotation.y = Math.PI / 2;
          marker2 = mesh
          scene.add( marker2 );
          var mixer = new THREE.AnimationMixer( mesh );
          mixer.clipAction( geometry.animations[ 0 ] ).setDuration( 1 ).play();
          mixers.push( mixer );
        } );

          spline = new THREE.SplineCurve3([
            new THREE.Vector3(182, 3, 0),
            new THREE.Vector3(200, 3, -9),
              new THREE.Vector3(210, 3, -7),
              new THREE.Vector3(200, 3, 3),
              new THREE.Vector3(193, 3, 7),
              new THREE.Vector3(182, 3, 0)
           ]);

          spline1 = new THREE.SplineCurve3([
            new THREE.Vector3(210, 3, -7),
            new THREE.Vector3(200, 3, 3),
            new THREE.Vector3(193, 3, 7),
              new THREE.Vector3(182, 3, 0),
              new THREE.Vector3(200, 3, -9),
              new THREE.Vector3(210, 3, -7)
           ]);

          spline2 = new THREE.SplineCurve3([
            new THREE.Vector3(203, 3, -7),
            new THREE.Vector3(210, 3, 0),
            new THREE.Vector3(203, 3, 7),
              new THREE.Vector3(196, 3, 0),
              new THREE.Vector3(189, 3, -7),
              new THREE.Vector3(182, 3, 0),
              new THREE.Vector3(189, 3, 7),
              new THREE.Vector3(196, 3, 0),
              new THREE.Vector3(203, 3, -7)
           ]);
    
          var material = new THREE.LineBasicMaterial({
             color: 0xff00f0,
            });
    
            var geometry = new THREE.Geometry();
          for(var i = 0; i < spline.getPoints(100).length; i++){
              geometry.vertices.push(spline2.getPoints(100)[i]);  
          }
    
          var line = new THREE.Line(geometry, material);
          //scene.add(line);
          

          var loader = new THREE.ObjectLoader();
             loader.load("material/Campus2.json",function ( obje ) {
                //obj.scale.set(8,8,8);
                obje.position.x = 200;
                obje.rotation.y = Math.PI ;
                obj=obje
                
                scene.add( obj );
              
                scene.traverse(function(children){
                    objects.push(children);
                });

                           
            });
             raycaster = new THREE.Raycaster();
             mouse = new THREE.Vector2();

             document.addEventListener( 'mousedown', onDocumentMouseDown, false );
             document.addEventListener( 'touchstart', onDocumentTouchStart, false );

        var listener = new THREE.AudioListener();
        activeCamera.add( listener );

        var audioLoader = new THREE.AudioLoader();


        var sound4 = new THREE.Audio( listener );
        audioLoader.load( 'material/ShinnyMetal - Altoagain3.mp3', function( buffer ) {
          sound4.setBuffer( buffer );
          sound4.setLoop(true);
          sound4.setVolume(0.5);
          sound4.play();
        });
    
   
          
   
        var onProgress = function ( xhr ) {
          if ( xhr.lengthComputable ) {
        var percentComplete = xhr.loaded / xhr.total * 100;
            console.log( Math.round(percentComplete, 2) + '% downloaded' );
          }
        };

        var onError = function ( xhr ) { };

        THREE.Loader.Handlers.add( /\.dds$/i, new THREE.DDSLoader() );

        var mtlLoader = new THREE.MTLLoader();

        mtlLoader.load( 'material/bg.mtl', function( materials ) {

          materials.preload();

          var objLoader = new THREE.OBJLoader();
          objLoader.setMaterials( materials );

          objLoader.load( 'material/bg.obj', function ( object ) {

            object.position.set(0, 0, 0);
            object.position.x = 200;
            //object.scale.set(8,8,8);
            scene.add( object );
            //scene2.add( object );

          }, onProgress, onError );

        });
        

        var material = new THREE.MeshPhongMaterial({
            color: 0xFF0000,
            shading: THREE.FlatShading
         });

         // geometry
          var geometry = new THREE.BoxGeometry(1, 1, 1);

          // mesh
         mesh1 = new THREE.Mesh(geometry, material);
         //mesh1.position.z = 40;
          scene.add(mesh1);

        window.addEventListener( 'resize', onWindowResize, false );

        document.addEventListener( 'keydown', onKeyDown, false );
        

      }

      

      function onKeyDown ( event ) {
        switch( event.keyCode ) {


          case 66: //B
            camera2.position.x = 183;
            camera2.position.y = 2;
            break;
          case 67: //C
            camera2.position.x = 211;
            camera2.position.z = -5;
            camera2.position.y = 0.5;
            camera2.lookAt(new THREE.Vector3(200,0,200));
            
            break;
          
          
        }
      }

      function onDocumentTouchStart( event ) {

            event.preventDefault();

            event.clientX = event.touches[0].clientX;
            event.clientY = event.touches[0].clientY;
            onDocumentMouseDown( event );

        }
    
        function onDocumentMouseDown( event ) {

            event.preventDefault();

            mouse.x = ( event.clientX / renderer.domElement.width ) * 2 - 1;
            mouse.y = - ( event.clientY / renderer.domElement.height ) * 2 + 1;

            raycaster.setFromCamera( mouse, activeCamera );

            var intersects = raycaster.intersectObjects( objects );
        
            //var color = (Math.random() * 0xffffff);
            var color = (0xffffff);
      

            if ( intersects.length > 0 ) {

                intersects[ 0 ].object.material.color.setHex( color );
            
            
                this.name = intersects[ 0 ].object.name;
                //this.image = intersects[ 0 ].object.image;
                this.obj = intersects[ 0 ].object;
                //console.log(this.name);
                console.log(this.obj);
                //this.image = intersects[ 0 ].object.name.image;
                //var img = new Image();
                //img.src = this.image; 
                //img.setAttribute("class", "banner-img");
                //img.setAttribute("style", "width:100px;height:50px;");
            
                $( ".text" ).empty();
                $( ".popup" ).append( "<div class='text'><p>the name assigned in webgl is <strong>" + this.name  + "</strong></p></div>" );
                //$( ".popup" ).append( "<div class='text'><p>the name assigned in webgl is <strong>" + this.name  + "</strong></p></div><div class='banner-img' id='img-container'></div>" );
                //document.getElementById("img-container").appendChild(img);
                $(".popup").show();
            
            }
        
        } 

      

      function onWindowResize() {

        SCREEN_WIDTH = window.innerWidth;
        SCREEN_HEIGHT = window.innerHeight;

        windowHalfX = window.innerWidth / 2;
        windowHalfY = window.innerHeight / 2;

        activeCamera.aspect = window.innerWidth / window.innerHeight;

        activeCamera.updateProjectionMatrix();

        renderer.setSize( window.innerWidth, window.innerHeight );

      }
      

      function animate() {
         requestAnimationFrame(animate);
         mesh1.rotation.x +=0.005;
         mesh1.rotation.z +=0.01;
        
          render();
          
  
      }

      var theta = 0;
      var t = 0;
      var t1 = 0;
      var t2 = 0;

      function render() {
        
        // set the marker position
          pt = spline.getPoint( t );
          pt1 = spline1.getPoint( t1 );
          pt2 = spline2.getPoint( t2 );

          marker.position.set( pt.x, pt.y, pt.z );
          //camera3.position.set( pt.x, pt.y, pt.z );
          marker1.position.set( pt1.x, pt1.y, pt1.z );
          marker2.position.set( pt2.x, pt2.y, pt2.z );
    
          // get the tangent to the curve
          tangent = spline.getTangent( t ).normalize();
          tangent1 = spline1.getTangent( t1 ).normalize();
          tangent2 = spline2.getTangent( t2 ).normalize();
    
          // calculate the axis to rotate around
          axis.crossVectors( up, tangent ).normalize();
          axis1.crossVectors( up1, tangent1 ).normalize();
          axis2.crossVectors( up2, tangent2 ).normalize();
    
          // calcluate the angle between the up vector and the tangent
          radians = Math.acos( up.dot( tangent ) );
          radians1 = Math.acos( up1.dot( tangent1 ) );
          radians2 = Math.acos( up2.dot( tangent2 ) );
        
          // set the quaternion
          marker.quaternion.setFromAxisAngle( axis, radians );
          //camera3.quaternion.setFromAxisAngle( axis, radians );
          marker1.quaternion.setFromAxisAngle( axis1, radians1 );
          marker2.quaternion.setFromAxisAngle( axis2, radians2 );
        
          t = (t >= 1) ? 0 : t += 0.0002;
          t1 = (t1 >= 1) ? 0 : t1 += 0.0002;
          t2 = (t2 >= 1) ? 0 : t2 += 0.0002;

            //activeCamera.lookAt( scene.position );


        var delta = clock.getDelta(),
          time = clock.getElapsedTime() * 10;

        marker.geometry.verticesNeedUpdate = true;
        for ( var i = 0; i < mixers.length; i ++ ) {
          mixers[ i ].update( delta );
        }
        renderer.clear();
        

        controls.update( delta );

          //cameraHelper.update();
          //cameraHelper.visible = false;
          
          renderer.setViewport( 0, 0, SCREEN_WIDTH, SCREEN_HEIGHT );
          
          renderer.render( scene, activeCamera );

          //cameraHelper.visible = true;
          
          renderer.setViewport( 0, 0, SCREEN_WIDTH, SCREEN_HEIGHT );
          renderer2.render( scene, camera1 );

          mesh1.position.x = camera2.position.x;
          mesh1.position.y = camera2.position.y;
          mesh1.position.z = camera2.position.z;

          //document.getElementById("position").innerHTML = "(" + camera1.position.x + "," + camera1.position.y + "," + camera1.position.z + ")" + "</br>" + "(" + obj.position.x + "," + obj.position.y + "," + obj.position.z + ")" + "</br>" + "(" + camera1.rotation.x + "," + camera1.rotation.y + "," + camera1.rotation.z + ")";



      }

      init();
      animate();

    </script>

  </body>

</html>
